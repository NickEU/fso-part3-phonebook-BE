(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,n,t){e.exports=t(40)},22:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),u=t(13),c=t.n(u),o=(t(22),t(14)),l=t(15),i=t(2),m=function(e){var n=e.name,t=e.number,a=e.children;return r.a.createElement("li",{id:"listItem"},n," ",t," ",a)},f=function(e){var n=e.list,t=e.onDeleteBtnClick,a=n.map(function(e){return r.a.createElement(m,{key:e.name,name:e.name,number:e.number},r.a.createElement("button",{className:"delete-btn",onClick:function(){return t(e.id)}},"delete"))});return r.a.createElement("div",{id:"listContainer"},r.a.createElement("h2",null,"Numbers"),r.a.createElement("ul",{id:"list"},a))},s=function(e){var n=e.onChange,t=e.inputValue;return r.a.createElement("div",{id:"filterForm"},r.a.createElement("br",null),r.a.createElement("span",null,"Filter results:"),r.a.createElement("input",{onChange:n,value:t}))},d=function(e){var n=e.formSubmit,t=e.onNameInputChange,a=e.onNumberInputChange,u=e.newName,c=e.newNumber;return r.a.createElement("div",{id:"addItemForm"},r.a.createElement("h4",null,"Add a new entry:"),r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,"name: ",r.a.createElement("input",{onChange:t,value:u})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{onChange:a,value:c})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add"))))},b=function(e){var n=e.error,t=n.text,a=n.isError;if(null===t)return null;var u=a?"error":"success";return r.a.createElement("div",{className:u},t)},h=t(3),v=t.n(h),p="https://intense-castle-88618.herokuapp.com/api/persons",E=function(){return v.a.get(p).then(function(e){return e.data})},g=function(e){return v.a.post(p,e).then(function(e){return e.data})},w=function(e){var n="".concat(p,"/").concat(e);return v.a.delete(n).then(function(e){return e})},C=function(e){var n="".concat(p,"/").concat(e.id);return v.a.put(n,e).then(function(e){return e.data})},j=[],O=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],u=n[1],c=Object(a.useState)(""),m=Object(i.a)(c,2),h=m[0],v=m[1],p=Object(a.useState)(""),O=Object(i.a)(p,2),N=O[0],k=O[1],y=Object(a.useState)(""),S=Object(i.a)(y,2),I=S[0],x=S[1],B=Object(a.useState)({text:null}),D=Object(i.a)(B,2),F=D[0],P=D[1],$=function(){E().then(function(e){return u(e)})};Object(a.useEffect)($,[]);var J=function(){return N.replace(/-+|\s+/g,"-").replace(/^-*(.+?)-*$/g,"$1")},L=function(e,n){j.length>0&&(j.forEach(function(e){return clearTimeout(e)}),j=[]),P({text:e,isError:n}),j.push(setTimeout(function(){P({text:null}),j.shift()},5e3))};return r.a.createElement("div",{id:"container"},r.a.createElement("h2",null,"Phonebook"),r.a.createElement(b,{error:F}),r.a.createElement(d,{formSubmit:function(e){if(console.log("entered form submit"),e.preventDefault(),""!==h&&/^[a-z ]*$/i.test(h)){var n=h.trim();if(""===N||/[^\d -]/.test(N))alert("Please enter a valid phone number");else if(!function(e){for(var n=function(n){var a=t[n];if(a.name===e)return window.confirm("".concat(e," already exists in the phonebook. Would you like to replace the old number with the new one?"))&&C(Object(l.a)({},a,{number:J()})).then(function(e){u(t.map(function(n){return n.id===a.id?e:n})),L("Updated info on ".concat(a.name),!1)}).catch(function(e){console.log(e),L("Info on ".concat(a.name," has already been removed from the server"),!0),$()}),{v:!0}},a=0;a<t.length;a++){var r=n(a);if("object"===typeof r)return r.v}return!1}(n)){var a={name:n,number:J()};g(a).then(function(){$(),L("Successfully added ".concat(a.name),!1)}),v(""),k("")}}else alert("Please enter a valid name")},onNameInputChange:function(e){v(e.target.value)},onNumberInputChange:function(e){k(e.target.value)},newName:h,newNumber:N}),r.a.createElement(s,{onChange:function(e){x(e.target.value)},inputValue:I}),r.a.createElement(f,{list:""===I?t:Object(o.a)(t).filter(function(e){return-1!==e.name.toLowerCase().indexOf(I.toLowerCase())}),onDeleteBtnClick:function(e){var n=t.find(function(n){return n.id===e});window.confirm("Wanna delete ".concat(n.name,"?"))&&w(e).then(function(){$(),L("Successfully deleted ".concat(n.name),!1)})}}))};c.a.render(r.a.createElement(O,null),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.9921d7f0.chunk.js.map